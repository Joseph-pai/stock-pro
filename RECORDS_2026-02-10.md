# 飆股選股邏輯強化 — 實作紀錄 (2026-02-10)

本文件整合了今日針對「飆股選股邏輯強化」任務的所有相關紀錄，包含實作計劃、任務清單與完成報告。

---

## 1. 實作計劃 (Implementation Plan)

> [!NOTE]
> 本計劃旨在解決原始選股邏輯中與理論框架的差距。

### 改進 1：延長 VRatio 基線期（5天 → 20天）
將 `calculateVRatio()` 的基線期從前 5 天改為前 20 天，以獲得更穩定的「平日均量」參考點。

### 改進 2：新增融資融券軋空信號
利用 FinMind API 獲取融資融券數據，判斷「融資溫和增加 + 股價同步上升」的軋空動能。

### 改進 3：新增跳空缺口（Gap Up）判斷
判斷「今日最低 > 昨日最高」的起跳信號。

### 改進 4：月營收「創近期新高」判斷
分析月營收絕對值，確認是否為近 6 個月新高。

### 改進 5：五維評分權重調整
- 量能激增：30 分
- 均線糾結：22 分
- 籌碼集中：22 分
- 融資軋空：11 分
- 基本面：15 分

---

## 2. 任務清單 (Task Checklist)

- [x] **延長 VRatio 基線期**
- [x] **新增融資融券軋空信號** (含 API 整合與 Redis 快取)
- [x] **新增跳空缺口判斷**
- [x] **新增月營收創近期新高判斷**
- [x] **更新評分權重與 UI 展示** (含 StockCard Tag 與首頁 Modal)
- [x] **上櫃數據同步優化**
- [x] **品牌與版權聲明更新** (五維評分引擎 V8.2 | Joseph PAI @2026)

---

## 3. 完成報告 (Walkthrough)

### 修改檔案清單
1. `src/services/engine.ts`: 核心算法邏輯
2. `src/services/scanner.ts`: 掃描引擎整合
3. `src/lib/finmind.ts`: FinMind API 擴充
4. `src/types/index.ts`: 資料型別擴充
5. `src/components/dashboard/StockCard.tsx`: UI 標籤顯示
6. `src/app/page.tsx`: 首頁說明、品牌更新、空值提示

### 核心功能達成
- ✅ **理論對標**：完全覆蓋用戶提到的「熱身信號」理論，包含盤整、放量、投信、融資、營收。
- ✅ **上櫃兼容**：經確認算法完全適用於上櫃（TPEX）市場。
- ✅ **風險提示**：新增「使用說明 & 勝率分析」Modal，明確揭露機率分布與操盤戰略。
- ✅ **編譯驗證**：`npm run build` 通過，無 TypeScript 錯誤。

---
*紀錄日期：2026-02-10*
*紀錄生成：Antigravity AI*
